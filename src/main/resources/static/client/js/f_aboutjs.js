/** * Created by ftt on 2015/12/4. *///多图片轮播切换(function($){    $.fn.picScroll=function(settings){        if(!this.length){return;};        settings=$.extend({},$.picScroll.defaults,settings);        var obj=this;        var scroller={};        scroller.fn={};        scroller.box=obj.find(settings.box);        scroller.list=scroller.box.find(settings.list);        scroller.items=scroller.list.find(settings.items);        scroller.itemSum=scroller.items.length;        if(scroller.itemSum<=1){return;};        scroller.plusBtn=obj.find(settings.plusBtn);        scroller.minusBtn=obj.find(settings.minusBtn);        scroller.itemWidth=scroller.items.outerWidth();        scroller.itemHeight=scroller.items.outerHeight();        if(settings.direction=="left"||settings.direction=="right"){            if(scroller.itemWidth*scroller.itemSum<=scroller.box.outerWidth()){return;};            scroller.plusVal="left";            scroller.minusVal="right";            scroller.moveVal=scroller.itemWidth;        }else{            if(scroller.itemHeight*scroller.itemSum<=scroller.box.outerHeight()){return;};            scroller.plusVal="top";            scroller.minusVal="bottom";            scroller.moveVal=scroller.itemHeight;        };        // 元素：左右操作按钮        if(settings.plus&&!scroller.plusBtn.length){            scroller.plusBtn=$("<a></a>",{"class":"plus"}).appendTo(obj);        };        if(settings.minus&&!scroller.minusBtn.length){            scroller.minusBtn=$("<a></a>",{"class":"minus"}).appendTo(obj);        };        // 元素：后补        scroller.list.append(scroller.list.html());        // 方法：开始        scroller.fn.on=function(){            if(!settings.auto){return;};            scroller.fn.off();            scroller.run=setTimeout(function(){                scroller.fn.goto(settings.direction);            },settings.time);        };        // 方法：停止        scroller.fn.off=function(){            if(typeof(scroller.run)!=="undefined"){clearTimeout(scroller.run);};        };        // 方法：增加控制        scroller.fn.addControl=function(){            if(settings.plus&&scroller.minusBtn.length){                scroller.plusBtn.bind("click",function(){                    scroller.fn.goto(scroller.plusVal);                });            };            if(settings.minus&&scroller.minusBtn.length){                scroller.minusBtn.bind("click",function(){                    scroller.fn.goto(scroller.minusVal);                });            };        };        // 方法：解除控制        scroller.fn.removeControl=function(){            if(scroller.plusBtn.length){scroller.plusBtn.unbind("click");};            if(scroller.minusBtn.length){scroller.minusBtn.unbind("click");};        };        // 方法：滚动        scroller.fn.goto=function(d){            scroller.fn.off();            scroller.fn.removeControl();            scroller.box.stop(true);            var _max;	// _max	滚动的最大限度            var _dis;	// _dis	滚动的距离            switch(d){                case "left":                case "top":                    _max=0;                    if(d=="left"){                        if(parseInt(scroller.box.scrollLeft(),10)==0){                            scroller.box.scrollLeft(scroller.itemSum*scroller.moveVal);                        };                        _dis=scroller.box.scrollLeft()-(scroller.moveVal*settings.step);                        if(_dis<_max){_dis=_max};                        scroller.box.animate({"scrollLeft":_dis},settings.speed,function(){                            if(parseInt(scroller.box.scrollLeft(),10)<=_max){                                scroller.box.scrollLeft(0);                            };                            scroller.fn.addControl();                        });                    }else{                        if(parseInt(scroller.box.scrollTop(),10)==0){                            scroller.box.scrollTop(scroller.itemSum*scroller.moveVal);                        };                        _dis=scroller.box.scrollTop()-(scroller.moveVal*settings.step);                        if(_dis<_max){_dis=_max};                        scroller.box.animate({"scrollTop":_dis},settings.speed,function(){                            if(parseInt(scroller.box.scrollTop(),10)<=_max){                                scroller.box.scrollTop(0);                            };                            scroller.fn.addControl();                        });                    };                    break;                case "right":                case "bottom":                    _max=scroller.itemSum*scroller.moveVal;                    if(d=="right"){                        _dis=scroller.box.scrollLeft()+(scroller.moveVal*settings.step);                        if(_dis>_max){_dis=_max};                        scroller.box.animate({"scrollLeft":_dis},settings.speed,function(){                            if(parseInt(scroller.box.scrollLeft(),10)>=_max){                                scroller.box.scrollLeft(0);                            };                        });                    }else{                        _dis=scroller.box.scrollTop()+(scroller.moveVal*settings.step);                        if(_dis>_max){_dis=_max};                        scroller.box.animate({"scrollTop":_dis},settings.speed,function(){                            if(parseInt(scroller.box.scrollTop(),10)>=_max){                                scroller.box.scrollTop(0);                            };                        });                    };                    break;            };            scroller.box.queue(function(){                scroller.fn.addControl();                scroller.fn.on();                $(this).dequeue();            });        };        // 事件：鼠标移入停止，移出开始        scroller.box.hover(function(){            scroller.fn.off();        },function(){            scroller.fn.on();        });        scroller.fn.addControl();        scroller.fn.on();    };    // 默认值    $.picScroll={defaults:{        box: "#box",		//列表盒元素        list: "#list",		//列表ul元素        items: "li",		//单个        plusBtn: "#plus", //上移&左移        minusBtn: "#minus", //下移&右移        direction:"right",	// 滚动方向        step:1,				// 滚动步长        speed:800,			// 滚动速度        time:3000,			// 自动滚动间隔时间        auto:true,			// 是否自动滚动        plus:true,			// 是否使用 plus 按钮        minus:true			// 是否使用 minus 按钮    }};})(jQuery);//适应高度$.fn.divfixed = function(options) {    var opts = $.extend({},options);    return this.each(function() {        var $this = $(this);        var thisTop=$this.offset().top;        var winTop=$(window).scrollTop();        var aLi=$('li',$this);        $(window).scroll(function()        {            winTop=$(window).scrollTop();            if(winTop > thisTop)            {                $this.css({"position":"fixed","top":opts.top});            }            else            {                $this.css({"position":"static","top":opts.top});            }        });    });};//选择时间点(function($) {    $.fn.timepicki = function(options) {        var defaults = {};        var settings = $.extend({},defaults, options);        return this.each(function() {            var ele = $(this);            var ele_hei = ele.outerHeight();            //var ele_lef = ele.position().left;            var ele_lef =0;            ele_hei += 2;            ele_lef += 8;            $(ele).wrap("<div class='time_pick'>");            var ele_par = $(this).parents(".time_pick");            ele_par.append("<div class='timepicker_wrap'><div class='time'><div class='prev'></div><div class='ti_tx'></div><div class='next'></div></div><div class='mins'><div class='prev'></div><div class='mi_tx'></div><div class='next'></div></div><div class='meridian'><div class='prev'></div><div class='mer_tx'></div><div class='next'></div></div></div>");            var ele_next = $(this).next(".timepicker_wrap");            var ele_next_all_child = ele_next.find("div");            ele_next.css({                "top": ele_hei + "px",                "left": ele_lef + "px"            });            $(document).on("click",function(event) {                    if (!$(event.target).is(ele_next)) {                        if (!$(event.target).is(ele)) {                            var tim = ele_next.find(".ti_tx").html();                            var mini = ele_next.find(".mi_tx").text();                            var meri = ele_next.find(".mer_tx").text();                            if (tim.length != 0 && mini.length != 0 && meri.length != 0) {                                ele.val(tim + " : " + mini + " : " + meri)                            }                            if (!$(event.target).is(ele_next) && !$(event.target).is(ele_next_all_child)) {                                ele_next.fadeOut()                            }                        } else {                            set_date();                            ele_next.fadeIn()                        }                    }                });            function set_date() {                var d = new Date();                var ti = d.getHours();                var mi = d.getMinutes();                var mer = "AM";                if (12 < ti) {                    ti -= 12;                    mer = "PM"                }                if (ti < 10) {                    ele_next.find(".ti_tx").text("0" + ti)                } else {                    ele_next.find(".ti_tx").text(ti)                }                if (mi < 10) {                    ele_next.find(".mi_tx").text("0" + mi)                } else {                    ele_next.find(".mi_tx").text(mi)                }                if (mer < 10) {                    ele_next.find(".mer_tx").text("0" + mer)                } else {                    ele_next.find(".mer_tx").text(mer)                }            }            var cur_next = ele_next.find(".next");            var cur_prev = ele_next.find(".prev");            $(cur_prev).add(cur_next).on("click",                function() {                    var cur_ele = $(this);                    var cur_cli = null;                    var ele_st = 0;                    var ele_en = 0;                    if (cur_ele.parent().attr("class") == "time") {                        cur_cli = "time";                        ele_en = 12;                        var cur_time = null;                        cur_time = ele_next.find("." + cur_cli + " .ti_tx").text();                        cur_time = parseInt(cur_time);                        if (cur_ele.attr("class") == "next") {                            if (cur_time == 12) {                                ele_next.find("." + cur_cli + " .ti_tx").text("01")                            } else {                                cur_time++;                                if (cur_time < 10) {                                    ele_next.find("." + cur_cli + " .ti_tx").text("0" + cur_time)                                } else {                                    ele_next.find("." + cur_cli + " .ti_tx").text(cur_time)                                }                            }                        } else {                            if (cur_time == 1) {                                ele_next.find("." + cur_cli + " .ti_tx").text(12)                            } else {                                cur_time--;                                if (cur_time < 10) {                                    ele_next.find("." + cur_cli + " .ti_tx").text("0" + cur_time)                                } else {                                    ele_next.find("." + cur_cli + " .ti_tx").text(cur_time)                                }                            }                        }                    } else if (cur_ele.parent().attr("class") == "mins") {                        cur_cli = "mins";                        ele_en = 59;                        var cur_mins = null;                        cur_mins = ele_next.find("." + cur_cli + " .mi_tx").text();                        cur_mins = parseInt(cur_mins);                        if (cur_ele.attr("class") == "next") {                            if (cur_mins == 59) {                                ele_next.find("." + cur_cli + " .mi_tx").text("00")                            } else {                                cur_mins++;                                if (cur_mins < 10) {                                    ele_next.find("." + cur_cli + " .mi_tx").text("0" + cur_mins)                                } else {                                    ele_next.find("." + cur_cli + " .mi_tx").text(cur_mins)                                }                            }                        } else {                            if (cur_mins == 0) {                                ele_next.find("." + cur_cli + " .mi_tx").text(59)                            } else {                                cur_mins--;                                if (cur_mins < 10) {                                    ele_next.find("." + cur_cli + " .mi_tx").text("0" + cur_mins)                                } else {                                    ele_next.find("." + cur_cli + " .mi_tx").text(cur_mins)                                }                            }                        }                    } else {                        ele_en = 1;                        cur_cli = "meridian";                        var cur_mer = null;                        cur_mer = ele_next.find("." + cur_cli + " .mer_tx").text();                        if (cur_ele.attr("class") == "next") {                            if (cur_mer == "AM") {                                ele_next.find("." + cur_cli + " .mer_tx").text("PM")                            } else {                                ele_next.find("." + cur_cli + " .mer_tx").text("AM")                            }                        } else {                            if (cur_mer == "AM") {                                ele_next.find("." + cur_cli + " .mer_tx").text("PM")                            } else {                                ele_next.find("." + cur_cli + " .mer_tx").text("AM")                            }                        }                    }                })        })    }} (jQuery));